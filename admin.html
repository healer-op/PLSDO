<!doctype html>
<html onclick="">

<head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <title>Admin - PLS DONATE</title>
    <link href='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css' rel='stylesheet'>
    <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css' rel='stylesheet'>
    <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
    <style>
        @font-face {
            font-family: extra;
            src: url("assets/fonts/cutta-extrabold.otf") format("opentype");
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        /* Track */
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        /* Handle */
        ::-webkit-scrollbar-thumb {
            background: #888;
        }

        /* Handle on hover */
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        body {
            font-family: cutta;
            color: #fff2d2;
            overflow-x: hidden;
            height: 100%;
            background: url("https://i.pinimg.com/736x/80/0a/b2/800ab270f1b724d30174d14c13a4323e.jpg")no-repeat center center fixed;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
        }

        .card {
            background-color: #00000069;
            padding: 30px 40px;
            margin-top: 60px;
            margin-bottom: 60px;
            border: none !important;
            box-shadow: 0 6px 12px 0 rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(2px);
        }

        .blue-text {
            color: #00BCD4
        }

        .form-control-label {
            margin-bottom: 0
        }

        input,
        textarea,
        button {
            padding: 8px 15px;
            border-radius: 5px !important;
            margin: 5px 0px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            font-size: 18px !important;
            font-weight: 300
        }

        input:focus,
        textarea:focus {
            -moz-box-shadow: none !important;
            -webkit-box-shadow: none !important;
            box-shadow: none !important;
            border: 1px solid #977e00;
            outline-width: 0;
            font-weight: 400
        }

        .btn-block {
            text-transform: uppercase;
            font-size: 15px !important;
            font-weight: 400;
            height: 43px;
            cursor: pointer
        }

        .btn-block:hover {
            color: #fff !important
        }

        button:focus {
            -moz-box-shadow: none !important;
            -webkit-box-shadow: none !important;
            box-shadow: none !important;
            outline-width: 0
        }

        a {
            color: #fff2d2;
            transition: 0.3s;
        }

        a:hover {
            color: #ffda7e;
        }
    </style>
</head>

<body className='snippet-body'>
    <div class="container-fluid px-1 py-5 mx-auto">
        <div class="row d-flex justify-content-center">
            <div class="col-xl-7 col-lg-8 col-md-9 col-11 text-center">
                <BR>
                <BR>
                <div class="card" style="border-radius: 12px;">
                    <h5 class="text-center mb-4">ADD USE<span onclick="archias()">R</span></h5>
                    <br>
                    <div class="form-card" id="form">
                        <div class="row justify-content-between text-left">
                            <div class="form-group col-12 flex-column d-flex"> <label
                                    class="form-control-label px-3">Username<span class="text-danger"> *</span></label>
                                <input type="text" id="link" name="link" placeholder="" autocomplete="off" readonly
                                    onfocus="this.removeAttribute('readonly');"> </div>
                        </div>
                        <div class="row justify-content-between text-left">
                            <div class="form-group col-12 flex-column d-flex"> <label
                                    class="form-control-label px-3">Password<span class="text-danger"> *</span></label>
                                <input type="password" id="pass" name="pass" placeholder="" autocomplete="off" readonly
                                    onfocus="this.removeAttribute('readonly');"> </div>
                        </div>
                        <div class="row justify-content-end">
                            <div class="form-group col-sm-6"> <button class="btn-block btn-primary" onclick="op()">+ Add
                                    User</button> </div>
                        </div>
                    </div>
                    <br>
                    <br>
                    <p class="text-center mb-4">Crafted by <a href="https://archiastudio.com">ArchiaStudio</a></p>
                </div>
            </div>
        </div>
    </div>
    <script type='text/javascript' src='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js'>
    </script>

    <script>
        // ARCHIASTUDIO



        function archias() {
            var pass = document.getElementById("pass").value
            localStorage.setItem("pass", pass);
            alert("password saved no need to enter next time")
        }

        async function getRobloxAvatarUrl(username) {
            try {
                // Step 1: Fetch the user ID using the username
                const userResponse = await fetch(`https://users.roproxy.com/v1/usernames/users`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        usernames: [username]
                    })
                });


                if (!userResponse.ok) {
                    throw new Error(`Failed to fetch user ID: ${userResponse.status}`);
                }

                const userData = await userResponse.json();
                console.log(userData)
                const userId = userData.data[0].id;
                console.log(userId)


                // Step 2: Fetch the avatar URL using the user ID
                const avatarResponse = await fetch(
                    `https://thumbnails.roproxy.com/v1/users/avatar-headshot?userIds=${userId}&size=150x150&format=Png&isCircular=true`
                );
                let avatarData = await avatarResponse.json()
                const avatarUrl = avatarData.data[0].imageUrl


                return avatarUrl;
            } catch (error) {
                console.error(error);
                return null;
            }
        }

        // Example usage

        async function op() {
            var link = document.getElementById("link").value
            var pass = document.getElementById("pass").value
            console.log(link,pass)

            await getRobloxAvatarUrl(`${link}`).then((url) => {
                if (url) {
                    console.log('Avatar URL:', url);
                    var datas = {
                        "username": link,
                        "image": url,
                    }

                    console.log(datas)
                    var formUrl =
                        `https://script.google.com/macros/s/AKfycbw2yWSKz5iWq1X0cJ3jCv4sbhMV1TvinAQVbgoccHnlhNS1KroMxrppr6Q01TA8o2aG/exec?action=addUser&pass=${pass}`

                    if (link && pass) {
                        fetch(`${formUrl}`, {
                            method: 'POST',
                            body: JSON.stringify(datas)
                        }).then(res => alert("UserAdded"));
                    } else {
                        alert("Fill All Fields")
                    }
                } else {
                    alert("Error in api")
                }
            });





        }
    </script>


</body>

</html>